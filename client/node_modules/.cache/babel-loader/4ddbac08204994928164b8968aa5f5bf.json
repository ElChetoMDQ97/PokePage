{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _actionCreators = _interopRequireDefault(require(\"../actionCreators.js\"));\n\nvar _types = require(\"../types\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar audio = new _types.AudioOutput();\n\nvar audioOutput = function audioOutput(store) {\n  audio.addEventListener(\"timeupdate\", function () {\n    //set current time\n    store.dispatch(_actionCreators.default.setCurrentTime(Math.floor(audio.currentTime))); // set time left\n\n    store.dispatch(_actionCreators.default.setTimeLeft(Math.floor(isNaN(audio.duration) ? 0 : audio.duration - audio.currentTime)));\n  }); // set error listener\n\n  audio.addEventListener(\"error\", function () {\n    store.dispatch(_actionCreators.default.stop());\n  }); // set canplay listener\n\n  audio.addEventListener(\"canplay\", function () {\n    var mediaState = store.getState().mediaState;\n    if (mediaState === _types.MediaState.PLAYING) audio.play().catch(function () {\n      return store.dispatch(_actionCreators.default.stop());\n    });\n  }); // set \"on playback ended\" listener\n\n  audio.addEventListener(\"ended\", function () {\n    var state = store.getState();\n    var currentTrack = state.currentTrack;\n    var isLastTrack = currentTrack === state.playlist.length - 1;\n\n    switch (state.repeatMode) {\n      case _types.RepeatMode.REPEAT_ALL:\n        if (isLastTrack) store.dispatch(_actionCreators.default.changeTrack(0));else store.dispatch(_actionCreators.default.changeTrack(++currentTrack));\n        break;\n\n      case _types.RepeatMode.REPEAT_ONE:\n        audio.play(); // play again\n\n        break;\n\n      case _types.RepeatMode.NORMAL:\n      default:\n        if (isLastTrack) store.dispatch(_actionCreators.default.stop());else store.dispatch(_actionCreators.default.changeTrack(++currentTrack));\n    }\n  }); // set default volume level\n\n  audio.volume = store.getState().volume / 100;\n  return function (next) {\n    return function (action) {\n      var state = store.getState();\n\n      switch (action.type) {\n        case _types.ActionTypes.CHANGE_TRACK:\n          var nexTrack = state.playlist[action.payload.index];\n          audio.setSrc(nexTrack);\n          break;\n\n        case _types.ActionTypes.PLAY:\n          audio.setSrc(state.playlist[state.currentTrack]);\n          audio.play().catch(function () {\n            return store.dispatch(_actionCreators.default.stop());\n          });\n          break;\n\n        case _types.ActionTypes.PAUSE:\n          audio.pause();\n          break;\n\n        case _types.ActionTypes.STOP:\n          audio.clear();\n          break;\n\n        case _types.ActionTypes.SEEK:\n          audio.currentTime = action.payload.progress / 100 * audio.duration;\n          break;\n\n        case _types.ActionTypes.CHANGE_VOLUME:\n          audio.volume = action.payload.volume / 100;\n          break;\n\n        case _types.ActionTypes.SKIP_PREV:\n          if (audio.currentTime > 3) {\n            store.dispatch(_actionCreators.default.seek(0));\n            return; // drop the action\n          }\n\n          break;\n\n        default:\n          break;\n      }\n\n      return next(action);\n    };\n  };\n};\n\nvar _default = audioOutput;\nexports.default = _default;","map":{"version":3,"names":["Object","defineProperty","exports","value","default","_actionCreators","_interopRequireDefault","require","_types","obj","__esModule","audio","AudioOutput","audioOutput","store","addEventListener","dispatch","setCurrentTime","Math","floor","currentTime","setTimeLeft","isNaN","duration","stop","mediaState","getState","MediaState","PLAYING","play","catch","state","currentTrack","isLastTrack","playlist","length","repeatMode","RepeatMode","REPEAT_ALL","changeTrack","REPEAT_ONE","NORMAL","volume","next","action","type","ActionTypes","CHANGE_TRACK","nexTrack","payload","index","setSrc","PLAY","PAUSE","pause","STOP","clear","SEEK","progress","CHANGE_VOLUME","SKIP_PREV","seek","_default"],"sources":["C:/Users/Juan/Desktop/Programacion/Henry/repositorios/Proyecto Individual/PI-Pokemon-main/client/node_modules/react-material-music-player/dist/redux/middleware/audioOutput.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _actionCreators = _interopRequireDefault(require(\"../actionCreators.js\"));\n\nvar _types = require(\"../types\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar audio = new _types.AudioOutput();\n\nvar audioOutput = function audioOutput(store) {\n  audio.addEventListener(\"timeupdate\", function () {\n    //set current time\n    store.dispatch(_actionCreators.default.setCurrentTime(Math.floor(audio.currentTime))); // set time left\n\n    store.dispatch(_actionCreators.default.setTimeLeft(Math.floor(isNaN(audio.duration) ? 0 : audio.duration - audio.currentTime)));\n  }); // set error listener\n\n  audio.addEventListener(\"error\", function () {\n    store.dispatch(_actionCreators.default.stop());\n  }); // set canplay listener\n\n  audio.addEventListener(\"canplay\", function () {\n    var mediaState = store.getState().mediaState;\n    if (mediaState === _types.MediaState.PLAYING) audio.play().catch(function () {\n      return store.dispatch(_actionCreators.default.stop());\n    });\n  }); // set \"on playback ended\" listener\n\n  audio.addEventListener(\"ended\", function () {\n    var state = store.getState();\n    var currentTrack = state.currentTrack;\n    var isLastTrack = currentTrack === state.playlist.length - 1;\n\n    switch (state.repeatMode) {\n      case _types.RepeatMode.REPEAT_ALL:\n        if (isLastTrack) store.dispatch(_actionCreators.default.changeTrack(0));else store.dispatch(_actionCreators.default.changeTrack(++currentTrack));\n        break;\n\n      case _types.RepeatMode.REPEAT_ONE:\n        audio.play(); // play again\n\n        break;\n\n      case _types.RepeatMode.NORMAL:\n      default:\n        if (isLastTrack) store.dispatch(_actionCreators.default.stop());else store.dispatch(_actionCreators.default.changeTrack(++currentTrack));\n    }\n  }); // set default volume level\n\n  audio.volume = store.getState().volume / 100;\n  return function (next) {\n    return function (action) {\n      var state = store.getState();\n\n      switch (action.type) {\n        case _types.ActionTypes.CHANGE_TRACK:\n          var nexTrack = state.playlist[action.payload.index];\n          audio.setSrc(nexTrack);\n          break;\n\n        case _types.ActionTypes.PLAY:\n          audio.setSrc(state.playlist[state.currentTrack]);\n          audio.play().catch(function () {\n            return store.dispatch(_actionCreators.default.stop());\n          });\n          break;\n\n        case _types.ActionTypes.PAUSE:\n          audio.pause();\n          break;\n\n        case _types.ActionTypes.STOP:\n          audio.clear();\n          break;\n\n        case _types.ActionTypes.SEEK:\n          audio.currentTime = action.payload.progress / 100 * audio.duration;\n          break;\n\n        case _types.ActionTypes.CHANGE_VOLUME:\n          audio.volume = action.payload.volume / 100;\n          break;\n\n        case _types.ActionTypes.SKIP_PREV:\n          if (audio.currentTime > 3) {\n            store.dispatch(_actionCreators.default.seek(0));\n            return; // drop the action\n          }\n\n          break;\n\n        default:\n          break;\n      }\n\n      return next(action);\n    };\n  };\n};\n\nvar _default = audioOutput;\nexports.default = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script"}